"use strict";(self.webpackChunklvxtxfx3_5uppobgst2h=self.webpackChunklvxtxfx3_5uppobgst2h||[]).push([[688],{2472:(e,t,r)=>{r.r(t),r.d(t,{LoginModal:()=>$});var n=r(9328),s=r(5326),a=(r(7297),r(8941),r(9562),r(2363)),i=r(1401),c=r(2022),o=r(7918),l=r(4857),u=r(476),d=r(1540),m=r.n(d),v=r(8249),p=r.n(v);const f=new(m())({id:"cross_2b5e--react",use:"cross_2b5e--react-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="cross_2b5e--react"><path d="M7.05 5.636A1 1 0 0 0 5.636 7.05l4.95 4.95-4.95 4.95a1 1 0 0 0 1.414 1.414l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414-1.414L13.414 12l4.95-4.95a1 1 0 0 0-1.414-1.414L12 10.586l-4.95-4.95z" fill="currentColor" /></symbol>'});function h(e){return p().add(f),a.createElement("svg",(0,n.Z)({viewBox:"0 0 24 24"},e),a.createElement("use",{xlinkHref:"#cross_2b5e--react"}))}h.displayName="SpriteSymbolComponent(cross_2b5e--react)";var g=r(40),C=r(6178),b=r(773),y=r(4773),R=r(1300);const E=e=>"modest"===e||"modest-video"===e,w=.5625,k=e=>{let{el:t,viewType:r,isVerticalScreen:n,videoFrameRatio:s=w,maxResponsiveHeightRatio:a=w}=e;const i=t.clientWidth*s-0,c=t.clientHeight/3;return"modest"===r?Math.min(i,c):n&&"modest-video"===r?s>a?c:i:0};var H=r(4369),S=r.n(H),x=r(130),T=r(9105),N=r.n(T);const F={dragToClose:{ru:"Потянуть для закрытия",_context:""},curtain:{ru:"Шторка",_context:""},curtainOverlay:{ru:"Подложка для закрытия шторки",_context:""},closeCurtain:{ru:"Закрыть шторку",_context:""}},V=((0,x.Wh)(F),(0,x.bN)(F)),M=(0,y.N)("drag-observer"),O="_is-touched",D=e=>{var t;let{isVisible:r,isCollapsed:n,children:s,renderHeader:c,isStickyHeader:o,isCloseButton:l,dragDisabled:d,isVerticalScreen:m,maxHeight:v,viewType:p,isNested:f,uiTheme:y,keepOverlay:w,theme:H,videoFrameRatio:T,onChangeViewMode:F,onTransitionEnd:D,contentContainerRef:L,onStartClosing:P,setIsFullscreenRef:A,maxWidth:_,classNameCurtain:Z,isOutsideClickDisabled:W,isPreventContentDrag:Y,offVideoFrameRatio:I}=e;const U=(0,i.useRef)(null),z=(0,i.useRef)(null),$=(0,i.useRef)(null),q=(0,i.useRef)(null),j=(0,g.e)($,L),G=(0,i.useRef)(0),J=(0,i.useRef)(0),K=(0,i.useRef)(!1),Q=(0,i.useRef)(!1),X=(0,i.useRef)(-1),ee=(0,i.useRef)(0),te=(0,x.bU)(),[re,ne]=(0,i.useState)(!1),se=(0,i.useCallback)((()=>{K.current=!0,P&&P()}),[P]),[ae,ie]=(0,i.useState)(!1),[ce,oe]=(0,i.useState)(!1),{progress:le,setProgress:ue,handleClose:de,progressForModestRef:me}=(e=>{let{dragObserverRef:t,viewType:r,isVisible:n,isVerticalScreen:s,isCollapsed:a,videoFrameRatio:c,maxResponsiveHeightRatio:o,onStartClosing:l}=e;const[u,d]=(0,i.useState)(999),m=(0,i.useRef)(0),v=(0,i.useRef)(0);(0,i.useEffect)((()=>{const{current:e}=t;e&&(m.current=e.clientHeight-0,v.current=k({el:e,viewType:r,isVerticalScreen:s,videoFrameRatio:c,maxResponsiveHeightRatio:o}))}),[t,s,r,c,o]);const p=(0,i.useCallback)((()=>{const{current:e}=t;e&&(m.current=e.clientHeight-0),d(m.current),l&&l()}),[l,t]),f=(0,i.useCallback)((()=>{d(0)}),[]),h=(0,i.useCallback)(((e,r,n)=>{const{current:s}=t;s&&(v.current=k({el:s,viewType:e,isVerticalScreen:r,videoFrameRatio:n,maxResponsiveHeightRatio:o})),d(v.current)}),[t,o]),g=(0,i.useCallback)(((e,t)=>E(e)&&t?h(e,t,c):f()),[f,h,c]);return(0,i.useEffect)((()=>{n?g(r,s):p()}),[n,p,s,g,r]),(0,i.useEffect)((()=>{E(r)||(a?p():g())}),[a,g,p,r]),{progress:u,setProgress:d,handleClose:p,progressForModestRef:v}})({isVisible:r,isVerticalScreen:m,isCollapsed:n,viewType:p,videoFrameRatio:T,maxResponsiveHeightRatio:.666,dragObserverRef:U,onStartClosing:se});(0,i.useEffect)((()=>{A&&A.current&&(A.current=()=>{ue(me.current)})}),[A,ue,me]);const ve=((null==(t=$.current)?void 0:t.clientWidth)||0)*(T||0),{overlayOpacity:pe,footerOverlayOpacity:fe,opacity:he}=(e=>{let{progress:t,progressForModest:r,viewType:n,keepOverlay:s,drawerContainerHeight:a,drawerHeight:i,videoHeight:c=0}=e;const o=t-r,l=o>0?1-(t-r)/(a-r):1,u=o<0?1-t/r:0,d="modest-video"===n?(0,R.uZ)(l,0,1):0!==t?1-(0,R.uZ)(t/Math.min(a,i),0,1):1;return{overlayOpacity:"modest-video"===n?u:s?1:d,footerOverlayOpacity:c&&"modest-video"===n?1-Math.max(t-c,0)/(a-c):0,opacity:d}})({viewType:p,keepOverlay:w,progress:le,drawerContainerHeight:J.current,drawerHeight:G.current,videoHeight:ve,progressForModest:me.current}),ge=`translate3d(0,${le}px,0)`,Ce=(0,i.useRef)(0),be=(0,i.useRef)(!1),ye=(0,i.useRef)(!1),Re=(0,u.Z)(le),Ee={transform:ge,maxHeight:v,maxWidth:_},we=B({videoFrameRatio:T}),ke=(0,i.useMemo)((()=>({top:I?"0":`calc(100vw * ${T} + 6px)`,opacity:fe})),[T,fe,I]);(0,i.useEffect)((()=>{E(p)&&F&&F(ae)}),[ae,F,p]),(0,i.useEffect)((()=>{const e=S()((()=>{q.current&&$.current&&U.current&&(G.current=$.current.clientHeight,ee.current=q.current.scrollHeight,J.current=U.current.clientHeight-0)}),300);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,i.useEffect)((()=>{$.current&&(G.current=$.current.clientHeight),U.current&&(J.current=U.current.clientHeight-0),E(p)&&(m?ie(!1):(X.current=-1,ie(!0)))}),[m,p,Re]);const He=(0,i.useCallback)((e=>{if(!Ce.current){var t;U.current&&q.current&&(J.current=U.current.clientHeight-0,ee.current=q.current.scrollHeight),Ce.current=e.touches[0].pageY;const r=ee.current>J.current,n=Boolean("modest"===p&&r&&!(null!=(t=$.current)&&t.scrollTop)&&Re.current);be.current=!n&&Ce.current-Re.current>120&&r&&E(p)}const r=e.touches[0].pageY-Ce.current;r<=0&&!Q.current&&be.current&&e.stopPropagation(),r>=0&&be.current&&($.current&&$.current.scrollTop>0?(ye.current=!0,e.stopPropagation()):Q.current||(X.current=Re.current-r)),r<=0&&!Q.current&&!E(p)&&e.stopPropagation(),$.current&&r>0&&!E(p)&&($.current.scrollTop>0||ye.current)&&(ye.current=!0,e.stopPropagation())}),[Re,p]),Se=(0,i.useCallback)(((e,t)=>(0,R.uZ)(e+t,0,J.current)),[]);(0,i.useEffect)((()=>{if($.current){const e=$.current;return e.addEventListener("touchmove",He,!0),()=>{e.removeEventListener("touchmove",He)}}}),[$,He]),(0,i.useEffect)((()=>{if($.current&&o){const e=$.current,t=()=>{e.scrollTop>0?oe(!0):oe(!1)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}}),[$,o]);const xe=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[]),Te=(0,i.useCallback)((e=>{if(K.current)return;-1===X.current&&(X.current=Re.current);const{deltaY:t}=e,r=G.current,n=Se(X.current,t);return X.current>=0&&n>=r&&de(),ue(n)}),[de,Se,ue,Re]),Ne=(0,i.useCallback)((e=>{var t;$.current&&!K.current&&U.current&&(q.current&&(ee.current=q.current.scrollHeight),G.current=$.current.clientHeight,J.current=U.current.clientHeight-0,null==(t=z.current)||t.classList.add(O),Q.current=!0,Te(e))}),[Te]),Fe=(0,i.useCallback)((e=>{var t;const r=Math.min(J.current-X.current,J.current),{pageY:n,startY:s,velocityY:a}=e,i=n-s,c=Math.max(X.current,0);if(X.current=-1,null==(t=z.current)||t.classList.remove(O),Q.current=!1,!a)return;const o=Se(c,i),l=E(p)?me.current:0,u=o-0<=l-o?0:l;if(i/r>=1&&(de(),ie(!1),D(!0)),!(Math.abs(a)>=.25))return i/r>=.5?(ie(!1),de()):(ie(0===u),ue(u));i>0?E(p)?(ie(!1),0!==c?de():ue(l),i>r&&D(!0)):(de(),i>r&&D(!0)):(ie(!0),ue(0))}),[de,ue,Se,D,me,p]),Ve=(0,i.useCallback)((()=>{Ce.current=0,ye.current=!1}),[]),Me=(0,i.useMemo)((()=>({el:U,onDragStart:Ne,onDrag:Te,onDragEnd:Fe,isVerticalDragAllowed:!0,isDisabled:d||K.current||re,isMouseFallbackAllowed:!0,onPointerUp:Ve})),[Ne,Te,Fe,d,Ve,re]);(0,b.gt)(Me);const Oe=(0,i.useCallback)((e=>{U.current&&!U.current.contains(e.target)||W||(K.current=!0,ne(!0),de())}),[de,W]);(0,C.Z)(z,Oe);const De=(0,i.useCallback)((e=>{"transform"===e.propertyName&&(!G.current&&$.current&&(G.current=$.current.clientHeight),D(0!==G.current&&Re.current>=G.current))}),[D,Re]);(0,i.useEffect)((()=>{const e=z.current;if(e&&Y)return e.addEventListener("touchmove",xe,!0),()=>{e.removeEventListener("touchmove",xe)}}),[z,Y,xe]);const Be=(0,i.useCallback)((()=>{ie(!1),de()}),[de,ie]);return a.createElement("div",{className:M({isNested:f,theme:H,viewType:p,isTouched:Q.current,isClosing:K.current}),ref:U},a.createElement("div",{className:M("overlay"),style:{opacity:pe},"aria-label":V.curtainOverlay(te)}),a.createElement("div",{className:M("footer-overlay"),style:ke}),a.createElement("div",{className:N()(M("curtain",{viewType:p,uiTheme:y}),Z),style:Ee,ref:z,onTransitionEnd:De,"aria-label":V.curtain(te)},a.createElement("div",{className:M("handle"),style:{opacity:he},"aria-label":V.dragToClose(te)}),a.createElement("div",{className:M("content",{viewType:p}),ref:j},c?a.createElement("div",{className:M("header",{isStickyHeader:o,isContentScrolled:ce})},a.createElement("div",{className:M("header-content")},c(Be)),l&&a.createElement("div",{"aria-label":V.closeCurtain(te),className:M("cross-icon-wrapper"),onClick:Be},a.createElement(h,{className:M("cross-icon")}))):null,a.createElement("div",{className:M("content-scroll"),ref:q,style:we},s))))},B=e=>{let{videoFrameRatio:t}=e;return(0,i.useMemo)((()=>{if(t)return t>.666?{paddingBottom:"calc(33vh + 20px)"}:{paddingBottom:`calc(100vw * ${t} + 20px)`}}),[t])};var L=r(2050),P=r(9099),A=r(9634),_=r(6177),Z=r(6392),W=r(4094);const Y=(0,y.N)("drawer"),I=e=>{let{children:t,renderHeader:r,isStickyHeader:n,isCloseButton:s,onClose:c,maxHeight:o,isVisible:l=!1,isNested:u,dragDisabled:d,isOutsideClickDisabled:m,isPreventContentDrag:v,isLockBodyScrollEnabled:p,theme:f=_.DD.white,className:h,isVerticalScreen:g,onChangeViewMode:C,viewType:b,win:R,isSticky:E=!0,uiTheme:w,containerRef:k,contentRef:H,targetRef:S,isCollapsed:x,videoFrameRatio:T,onCurtainCollapsed:N,onStartClosing:F,onOpen:V,setIsFullscreenRef:M,dataTestid:O,maxWidth:B,classNameCurtain:I,shouldSkipScrollAfterClose:U,offVideoFrameRatio:z}=e;const[$,q]=(0,i.useState)(!1),[j,G]=(0,i.useState)(!l),J=l&&p;(0,P.N)(J,R,E,void 0,U);const K=(0,A.m)((e=>{if(e){if(x)return void(N&&N());G(!0),c()}else q(!1),V&&V()}));(0,i.useEffect)((()=>{x&&q(!0)}),[x]),(0,Z.Z)((()=>{l&&G(!1)}),[l]);const Q=(0,W.Z)(S);return(0,i.useEffect)((()=>{S===Q||l||(G(!0),c())}),[S,l,c,Q]),j&&!l?null:(0,L.createPortal)(a.createElement("div",{className:y.N.mix(h,Y({isVisible:!j||l})),ref:k,"aria-label":"Контекстное меню","data-hT8qMrVDF":O},a.createElement(D,{contentContainerRef:H,theme:f,uiTheme:w,isVerticalScreen:g,maxHeight:o,dragDisabled:d,onChangeViewMode:C,renderHeader:r,isStickyHeader:n,isCloseButton:s,isOutsideClickDisabled:m,isPreventContentDrag:v,viewType:b,isVisible:l,isCollapsed:x,isNested:u,videoFrameRatio:T,onTransitionEnd:K,keepOverlay:$,onStartClosing:F,setIsFullscreenRef:M,maxWidth:B,classNameCurtain:I,offVideoFrameRatio:z},t)),S&&S.current||document.body)};var U=r(2620);const z=["isVisible","handleClose","isMobileFromProps","verticalAlign","contentClassName","isOneTapButtonAuthEnabled","shouldUseBottomView","trapFocus","restoreFocus"],$=(0,i.memo)((e=>{let{isVisible:t,handleClose:r,isMobileFromProps:u,verticalAlign:d,contentClassName:m,isOneTapButtonAuthEnabled:v=!0,shouldUseBottomView:p=!1,trapFocus:f,restoreFocus:h}=e,g=(0,s.Z)(e,z);const[C,b]=(0,i.useState)(!0),y=Boolean(u),R=d||(y?"bottom":"middle"),E=(0,i.useCallback)((()=>{b(!1)}),[]),w=a.createElement(l.q,(0,n.Z)({className:m,isMobile:y,isOneTapButtonAuthEnabled:v,ariaLabel:"Попап авторизации",isBottomView:y},g));if(y){const e=[U.D.ARTICLE_END].includes(g.type),s={isVisible:t,isLockBodyScrollEnabled:!0,onClose:r,isOutsideClickDisabled:e&&C,shouldSkipScrollAfterClose:e,onOpen:E};return p?a.createElement(c.A,(0,n.Z)({isSticky:!0},s),w):a.createElement(I,(0,n.Z)({viewType:"handle-inside"},s),w)}return a.createElement(o.u,{visible:t,onClose:r,hasCloseButton:!0,autoFocus:!1,trapFocus:f,restoreFocus:h,contentVerticalAlign:R,keepMounted:!1},w)}))}}]);
//# sourceMappingURL=https://s3-zen.mds.yandex.net/zen-eb/source-maps/prod/dzen-layout/1.21.1/dzen-layout-desktop-login-modal.modern.bundle.js.map